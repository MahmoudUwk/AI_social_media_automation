import os
import sys
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
import asyncio
# from langchain_openai import ChatOpenAI  # Remove OpenAI
from langchain_google_genai import ChatGoogleGenerativeAI  # Import Gemini
from browser_use import Agent
from browser_use.browser.browser import Browser, BrowserConfig

prompt_template = """
You are a social media assistant.  Your task is to access the user's Facebook page (which is already logged in).
Then, summarize the content of the first 5 posts you find.
"""

browser = Browser(
    config=BrowserConfig(
        chrome_instance_path='C:/Program Files (x86)/Google/Chrome/Application/chrome.exe',
    )
)



async def main():
    agent = Agent(
        task=prompt_template,
        # llm=ChatOpenAI(model='gpt-4o'),  # Replace with Gemini
        llm=ChatGoogleGenerativeAI(model="gemini-2.0-pro-exp-02-05", convert_system_message_to_human=True),  # Use Gemini
        browser=browser,
    )

    await agent.run()
    await browser.close()

    input('Press Enter to close...')


if __name__ == '__main__':
    asyncio.run(main())
